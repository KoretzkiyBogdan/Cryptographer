var crypt=function(){var r=["g","h","i","p","q","r","y","z"].concat(["а","б","в"]),t=["j","k","l","s","t","u","!","$","|","@","~"].concat(["г","д","е","?"]),n=["m","n","o","v","w","x","&","^","%","#"].concat(["ё","ж","з","и","й","к","л","м","с","т","у","ю","я"]),o=function(){return!!Math.round(Math.random())},e=function(r,t){return Math.floor(Math.random()*r+(t||0))},a=function(r){return r.split("").reverse().join("")},u=function(r){var t=r[e(r.length-1)];return o()?t.toUpperCase():t},i=function(i){var c=i;o()&&n.forEach(function(r){r.charCodeAt(0)==parseInt(i,16)&&(i=o()?r.toUpperCase():r)}),o()&&(c=a(i)+u(t));for(var f=e(4,1),p=e(4,1),h=0;f>h;h++)c+=o()?u(r).toUpperCase():u(r);for(var h=0;p>h;h++)c=(o()?u(r).toUpperCase():u(r))+c;return c},c=function(r){return r.toString().split("").map(function(r){return r.charCodeAt(0)})},f=function(r,t){return t.forEach(function(n){r^=Math.floor(n/t.length)}),r},p=function(r,t){if(""===r)return Error("You must put message for right work");if(""===t)return Error("You must put key for right work");var n=c(t);return r.toString().split("").map(function(r){return r=f(r.charCodeAt(0),n),i(r.toString(16))}).join("")},h=function(r,o){if(void 0===o||""===o)return new Error("You must put key as second parameter");var e=new RegExp("[a-f]?(\\d+|[a-f]|["+n.join("")+"])([a-f"+t.join("")+"])?","gi"),u=new RegExp("["+t.join("")+"]","i"),i=new RegExp("["+n.join("")+"]","i"),p=c(o),h=r.match(e);return h?h.map(function(r){return r.match(u)&&(r=a(r.replace(u,""))),r.match(i)&&(r=r.toLowerCase().charCodeAt(0).toString(16)),r=f(parseInt(r,16),p),String.fromCharCode(r)}).join(""):r};return{encode:p,decode:h}}();